{% extends 'base.html' %} {% block content %}



<div class="row">
    <div class="col-4">
        <canvas id="visperiodo"></canvas>
    </div>
    <div class="col-6">
        <canvas id="visqtdalunos"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



<script>
    $(document).ready(() => {

        // Retorna gráfico de pizza em relação ao período
        function visPeriodo() {
            $.get({
                url: "{% url 'visperiodo' %}",
                data: {
                    ano: localStorage.getItem('anoConfig'),
                },
                success: (response) => {
                    gerarGraficoPeriodo(response);


                },
                fail: (response) => { },
            });
        }

        function visQtdAlunos() {
            $.get({
                url: "{% url 'visqtdalunos' %}",
                data: {
                    ano: localStorage.getItem('anoConfig'),
                },
                success: (response) => {
                    console.log(response);
                    gerarGraficoQtdAlunos(response);


                },
                fail: (response) => { },
            });
        }

        function gerarGraficoQtdAlunos(response) {
            const ctx = document.getElementById('visqtdalunos');

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                    datasets: [{
                        label: 'Alunos Cursando: ',
                        data: [response['Janeiro'], response['Fevereiro'], response['Março'],
                        response['Abril'], response['Maio'], response['Junho'],
                        response['Julho'], response['Agosto'], response['Setembro'],
                        response['Outubro'], response['Novembro'], response['Dezembro'],],
                        borderWidth: 1,
                        fill: false,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }]
                },
                options: {




                }
            });
        }



        function gerarGraficoPeriodo(response) {
            const ctx = document.getElementById('visperiodo');

            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Manhã', 'Tarde'],
                    datasets: [{
                        label: 'Quantidade: ',
                        data: [response['manha'], response['tarde'],],
                        borderWidth: 1
                    }]
                },
                options: {




                }
            });
        }

        visPeriodo();
        visQtdAlunos();

    });
</script>

{% endblock content %}